<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.9.1"/>
<title>pictDB: pictDB.h File Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { init_search(); });
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td style="padding-left: 0.5em;">
   <div id="projectname">pictDB
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.9.1 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="annotated.html"><span>Data&#160;Structures</span></a></li>
      <li class="current"><a href="files.html"><span>Files</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="files.html"><span>File&#160;List</span></a></li>
      <li><a href="globals.html"><span>Globals</span></a></li>
    </ul>
  </div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#nested-classes">Data Structures</a> &#124;
<a href="#define-members">Macros</a> &#124;
<a href="#enum-members">Enumerations</a> &#124;
<a href="#func-members">Functions</a>  </div>
  <div class="headertitle">
<div class="title">pictDB.h File Reference</div>  </div>
</div><!--header-->
<div class="contents">

<p>Main header file for pictDB core library.  
<a href="#details">More...</a></p>
<div class="textblock"><code>#include &quot;<a class="el" href="error_8h_source.html">error.h</a>&quot;</code><br />
<code>#include &lt;stdio.h&gt;</code><br />
<code>#include &lt;stdint.h&gt;</code><br />
<code>#include &lt;openssl/sha.h&gt;</code><br />
</div><div class="textblock"><div class="dynheader">
Include dependency graph for pictDB.h:</div>
<div class="dyncontent">
<div class="center"><img src="pictDB_8h__incl.png" border="0" usemap="#pictDB_8h" alt=""/></div>
<map name="pictDB_8h" id="pictDB_8h">
</map>
</div>
</div><div class="textblock"><div class="dynheader">
This graph shows which files directly or indirectly include this file:</div>
<div class="dyncontent">
<div class="center"><img src="pictDB_8h__dep__incl.png" border="0" usemap="#pictDB_8hdep" alt=""/></div>
<map name="pictDB_8hdep" id="pictDB_8hdep">
</map>
</div>
</div>
<p><a href="pictDB_8h_source.html">Go to the source code of this file.</a></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="nested-classes"></a>
Data Structures</h2></td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structpictdb__header.html">pictdb_header</a></td></tr>
<tr class="memdesc:"><td class="mdescLeft">&#160;</td><td class="mdescRight">Struct représentant le header d'une image.  <a href="structpictdb__header.html#details">More...</a><br /></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structpict__metadata.html">pict_metadata</a></td></tr>
<tr class="memdesc:"><td class="mdescLeft">&#160;</td><td class="mdescRight">Struct représentant la metadata d'une image.  <a href="structpict__metadata.html#details">More...</a><br /></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structpictdb__file.html">pictdb_file</a></td></tr>
<tr class="memdesc:"><td class="mdescLeft">&#160;</td><td class="mdescRight">Struct représentant une base de données d'images.  <a href="structpictdb__file.html#details">More...</a><br /></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="define-members"></a>
Macros</h2></td></tr>
<tr class="memitem:af27b4d1a50764da84f9f4f598d0e4bc6"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="af27b4d1a50764da84f9f4f598d0e4bc6"></a>
#define&#160;</td><td class="memItemRight" valign="bottom"><b>CAT_TXT</b>&#160;&#160;&#160;&quot;EPFL PictDB binary&quot;</td></tr>
<tr class="separator:af27b4d1a50764da84f9f4f598d0e4bc6"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:add99eb2952d109994c5d2df3afe609ee"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="add99eb2952d109994c5d2df3afe609ee"></a>
#define&#160;</td><td class="memItemRight" valign="bottom"><b>MAX_DB_NAME</b>&#160;&#160;&#160;31</td></tr>
<tr class="separator:add99eb2952d109994c5d2df3afe609ee"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad79abdef35483a29c5f4bbc3bf541782"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="ad79abdef35483a29c5f4bbc3bf541782"></a>
#define&#160;</td><td class="memItemRight" valign="bottom"><b>MAX_PIC_ID</b>&#160;&#160;&#160;127</td></tr>
<tr class="separator:ad79abdef35483a29c5f4bbc3bf541782"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8e6f36c4b8120b5a1be260cd56192b16"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a8e6f36c4b8120b5a1be260cd56192b16"></a>
#define&#160;</td><td class="memItemRight" valign="bottom"><b>MAX_MAX_FILES</b>&#160;&#160;&#160;100000</td></tr>
<tr class="separator:a8e6f36c4b8120b5a1be260cd56192b16"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a819a1ce46cdd68ad7333ea6322765a24"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a819a1ce46cdd68ad7333ea6322765a24"></a>
#define&#160;</td><td class="memItemRight" valign="bottom"><b>MAX_THUMB_RES</b>&#160;&#160;&#160;128</td></tr>
<tr class="separator:a819a1ce46cdd68ad7333ea6322765a24"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a057b7a13df76ccab8b3f791e35140663"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a057b7a13df76ccab8b3f791e35140663"></a>
#define&#160;</td><td class="memItemRight" valign="bottom"><b>MAX_SMALL_RES</b>&#160;&#160;&#160;512</td></tr>
<tr class="separator:a057b7a13df76ccab8b3f791e35140663"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2b7cf2a3641be7b89138615764d60ba3"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a2b7cf2a3641be7b89138615764d60ba3"></a>
#define&#160;</td><td class="memItemRight" valign="bottom"><b>EMPTY</b>&#160;&#160;&#160;0</td></tr>
<tr class="separator:a2b7cf2a3641be7b89138615764d60ba3"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad027c88b7d1deb8c6f2478b2d2b8ca14"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="ad027c88b7d1deb8c6f2478b2d2b8ca14"></a>
#define&#160;</td><td class="memItemRight" valign="bottom"><b>NON_EMPTY</b>&#160;&#160;&#160;1</td></tr>
<tr class="separator:ad027c88b7d1deb8c6f2478b2d2b8ca14"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0e30e6f374bcca8eceddc29baf1f3ac0"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a0e30e6f374bcca8eceddc29baf1f3ac0"></a>
#define&#160;</td><td class="memItemRight" valign="bottom"><b>RES_THUMB</b>&#160;&#160;&#160;0</td></tr>
<tr class="separator:a0e30e6f374bcca8eceddc29baf1f3ac0"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a861cc7e9e347d0dca1cfacc1eda1267e"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a861cc7e9e347d0dca1cfacc1eda1267e"></a>
#define&#160;</td><td class="memItemRight" valign="bottom"><b>RES_SMALL</b>&#160;&#160;&#160;1</td></tr>
<tr class="separator:a861cc7e9e347d0dca1cfacc1eda1267e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7adabcb1bfd8a8d48228190e2fe0c463"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a7adabcb1bfd8a8d48228190e2fe0c463"></a>
#define&#160;</td><td class="memItemRight" valign="bottom"><b>RES_ORIG</b>&#160;&#160;&#160;2</td></tr>
<tr class="separator:a7adabcb1bfd8a8d48228190e2fe0c463"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0a12665dfff5d7a34574ee34ed026096"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a0a12665dfff5d7a34574ee34ed026096"></a>
#define&#160;</td><td class="memItemRight" valign="bottom"><b>NB_RES</b>&#160;&#160;&#160;3</td></tr>
<tr class="separator:a0a12665dfff5d7a34574ee34ed026096"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7489acf4773e622a802155319f0533e8"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a7489acf4773e622a802155319f0533e8"></a>
#define&#160;</td><td class="memItemRight" valign="bottom"><b>EXTENSION</b>&#160;&#160;&#160;&quot;.pictDB&quot;</td></tr>
<tr class="separator:a7489acf4773e622a802155319f0533e8"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="enum-members"></a>
Enumerations</h2></td></tr>
<tr class="memitem:af68b9ba47e9dab280480cbdc41f7bc1e"><td class="memItemLeft" align="right" valign="top">enum &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="pictDB_8h.html#af68b9ba47e9dab280480cbdc41f7bc1e">do_list_mode</a> { <b>STDOUT</b>, 
<b>JSON</b>
 }</td></tr>
<tr class="separator:af68b9ba47e9dab280480cbdc41f7bc1e"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:aaa760ed2baba761ad864627e6dfebd72"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="pictDB_8h.html#aaa760ed2baba761ad864627e6dfebd72">print_header</a> (struct <a class="el" href="structpictdb__header.html">pictdb_header</a> const *header)</td></tr>
<tr class="memdesc:aaa760ed2baba761ad864627e6dfebd72"><td class="mdescLeft">&#160;</td><td class="mdescRight">Prints database header informations.  <a href="#aaa760ed2baba761ad864627e6dfebd72">More...</a><br /></td></tr>
<tr class="separator:aaa760ed2baba761ad864627e6dfebd72"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab6990baf805d6b7f0e9209df2552b274"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="pictDB_8h.html#ab6990baf805d6b7f0e9209df2552b274">print_metadata</a> (struct <a class="el" href="structpict__metadata.html">pict_metadata</a> const *metadata)</td></tr>
<tr class="memdesc:ab6990baf805d6b7f0e9209df2552b274"><td class="mdescLeft">&#160;</td><td class="mdescRight">Prints picture metadata informations.  <a href="#ab6990baf805d6b7f0e9209df2552b274">More...</a><br /></td></tr>
<tr class="separator:ab6990baf805d6b7f0e9209df2552b274"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aca538ce0c2adf847fee28ef959d1d718"><td class="memItemLeft" align="right" valign="top">const char *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="pictDB_8h.html#aca538ce0c2adf847fee28ef959d1d718">do_list</a> (struct <a class="el" href="structpictdb__file.html">pictdb_file</a> const *db_file, enum <a class="el" href="pictDB_8h.html#af68b9ba47e9dab280480cbdc41f7bc1e">do_list_mode</a> <a class="el" href="pictDB_8h.html#af68b9ba47e9dab280480cbdc41f7bc1e">do_list_mode</a>)</td></tr>
<tr class="memdesc:aca538ce0c2adf847fee28ef959d1d718"><td class="mdescLeft">&#160;</td><td class="mdescRight">Displays (on stdout or json) pictDB metadata.  <a href="#aca538ce0c2adf847fee28ef959d1d718">More...</a><br /></td></tr>
<tr class="separator:aca538ce0c2adf847fee28ef959d1d718"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2ab91b4b065e1aafe6be65943c6d42c1"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="pictDB_8h.html#a2ab91b4b065e1aafe6be65943c6d42c1">do_create</a> (struct <a class="el" href="structpictdb__file.html">pictdb_file</a> *db_file, const char *file_name)</td></tr>
<tr class="memdesc:a2ab91b4b065e1aafe6be65943c6d42c1"><td class="mdescLeft">&#160;</td><td class="mdescRight">Creates the database called db_filename. Writes the header and the preallocated empty metadata array to database file.  <a href="#a2ab91b4b065e1aafe6be65943c6d42c1">More...</a><br /></td></tr>
<tr class="separator:a2ab91b4b065e1aafe6be65943c6d42c1"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aabfa6e54ae2723bd6e96096688963fdf"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="pictDB_8h.html#aabfa6e54ae2723bd6e96096688963fdf">do_delete</a> (const char *pictID, struct <a class="el" href="structpictdb__file.html">pictdb_file</a> *db_file)</td></tr>
<tr class="memdesc:aabfa6e54ae2723bd6e96096688963fdf"><td class="mdescLeft">&#160;</td><td class="mdescRight">Deletes the image from the database given in argument.  <a href="#aabfa6e54ae2723bd6e96096688963fdf">More...</a><br /></td></tr>
<tr class="separator:aabfa6e54ae2723bd6e96096688963fdf"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa4ec55c072b39b2544d1b95ed6c21305"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="pictDB_8h.html#aa4ec55c072b39b2544d1b95ed6c21305">do_open</a> (const char *file_name, const char *open_mode, struct <a class="el" href="structpictdb__file.html">pictdb_file</a> *const pict_file)</td></tr>
<tr class="memdesc:aa4ec55c072b39b2544d1b95ed6c21305"><td class="mdescLeft">&#160;</td><td class="mdescRight">Opens (and only opens) the file indicated by the name, and charges its header and metadatas onto the the struct given.  <a href="#aa4ec55c072b39b2544d1b95ed6c21305">More...</a><br /></td></tr>
<tr class="separator:aa4ec55c072b39b2544d1b95ed6c21305"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ace6c2b2940dc6461637dda5b1f009fa0"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="pictDB_8h.html#ace6c2b2940dc6461637dda5b1f009fa0">do_close</a> (struct <a class="el" href="structpictdb__file.html">pictdb_file</a> *const pict_file)</td></tr>
<tr class="memdesc:ace6c2b2940dc6461637dda5b1f009fa0"><td class="mdescLeft">&#160;</td><td class="mdescRight">Closes the file associated with struct <a class="el" href="structpictdb__file.html" title="Struct représentant une base de données d&#39;images. ">pictdb_file</a> (which was previously already opened)  <a href="#ace6c2b2940dc6461637dda5b1f009fa0">More...</a><br /></td></tr>
<tr class="separator:ace6c2b2940dc6461637dda5b1f009fa0"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:abb4bb18ea30069cffdaf8f6c4a74848b"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="pictDB_8h.html#abb4bb18ea30069cffdaf8f6c4a74848b">resolution_atoi</a> (const char *const resolution)</td></tr>
<tr class="memdesc:abb4bb18ea30069cffdaf8f6c4a74848b"><td class="mdescLeft">&#160;</td><td class="mdescRight">Transforms a resolution given in form of a character string into the right resolution code.  <a href="#abb4bb18ea30069cffdaf8f6c4a74848b">More...</a><br /></td></tr>
<tr class="separator:abb4bb18ea30069cffdaf8f6c4a74848b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab9e40c54c4dc1c00e94556983e3502a5"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="pictDB_8h.html#ab9e40c54c4dc1c00e94556983e3502a5">do_read</a> (const char *pict_id, const int resolution_code, char **image_buffer, uint32_t *const image_size, struct <a class="el" href="structpictdb__file.html">pictdb_file</a> *const db_file)</td></tr>
<tr class="memdesc:ab9e40c54c4dc1c00e94556983e3502a5"><td class="mdescLeft">&#160;</td><td class="mdescRight">Extracts image from image database and load it.  <a href="#ab9e40c54c4dc1c00e94556983e3502a5">More...</a><br /></td></tr>
<tr class="separator:ab9e40c54c4dc1c00e94556983e3502a5"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a5fa3a40a86627407cbac79de17674e06"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="pictDB_8h.html#a5fa3a40a86627407cbac79de17674e06">do_insert</a> (const char *const image, size_t image_size, char *pict_id, struct <a class="el" href="structpictdb__file.html">pictdb_file</a> *db_file)</td></tr>
<tr class="memdesc:a5fa3a40a86627407cbac79de17674e06"><td class="mdescLeft">&#160;</td><td class="mdescRight">Inserts image in image database.  <a href="#a5fa3a40a86627407cbac79de17674e06">More...</a><br /></td></tr>
<tr class="separator:a5fa3a40a86627407cbac79de17674e06"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4e80f190aa94f7bc7d1e8b3588860114"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="pictDB_8h.html#a4e80f190aa94f7bc7d1e8b3588860114">do_gbcollect</a> (struct <a class="el" href="structpictdb__file.html">pictdb_file</a> *db_file, char const *orig_file_name, char *tmp_file_name)</td></tr>
<tr class="memdesc:a4e80f190aa94f7bc7d1e8b3588860114"><td class="mdescLeft">&#160;</td><td class="mdescRight">Performs garbage collecting on pictDB.  <a href="#a4e80f190aa94f7bc7d1e8b3588860114">More...</a><br /></td></tr>
<tr class="separator:a4e80f190aa94f7bc7d1e8b3588860114"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad7c4278babe85bd410e27593600c729b"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="pictDB_8h.html#ad7c4278babe85bd410e27593600c729b">read_disk_image</a> (const char *filename, size_t *const length, char **image_buffer)</td></tr>
<tr class="memdesc:ad7c4278babe85bd410e27593600c729b"><td class="mdescLeft">&#160;</td><td class="mdescRight">Read an image from the disk to store it in the DB.  <a href="#ad7c4278babe85bd410e27593600c729b">More...</a><br /></td></tr>
<tr class="separator:ad7c4278babe85bd410e27593600c729b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a563ba753dec49bfc2c10444897d21396"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="pictDB_8h.html#a563ba753dec49bfc2c10444897d21396">write_disk_image</a> (const char *const filename, char **image_buffer, uint32_t length)</td></tr>
<tr class="memdesc:a563ba753dec49bfc2c10444897d21396"><td class="mdescLeft">&#160;</td><td class="mdescRight">Store an image from the RAM into the disk.  <a href="#a563ba753dec49bfc2c10444897d21396">More...</a><br /></td></tr>
<tr class="separator:a563ba753dec49bfc2c10444897d21396"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a162114a649d7d00456af727a37528f5c"><td class="memItemLeft" align="right" valign="top">char *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="pictDB_8h.html#a162114a649d7d00456af727a37528f5c">createname</a> (const char *const pict_id, const int resolution_code)</td></tr>
<tr class="memdesc:a162114a649d7d00456af727a37528f5c"><td class="mdescLeft">&#160;</td><td class="mdescRight">creates the filename of the image that will be stocked on the disk  <a href="#a162114a649d7d00456af727a37528f5c">More...</a><br /></td></tr>
<tr class="separator:a162114a649d7d00456af727a37528f5c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8e8d7b46da60adc83d4fa683fbff134a"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="pictDB_8h.html#a8e8d7b46da60adc83d4fa683fbff134a">free_the_buffer</a> (char **image_buffer)</td></tr>
<tr class="memdesc:a8e8d7b46da60adc83d4fa683fbff134a"><td class="mdescLeft">&#160;</td><td class="mdescRight">free the memory of a buffered image.  <a href="#a8e8d7b46da60adc83d4fa683fbff134a">More...</a><br /></td></tr>
<tr class="separator:a8e8d7b46da60adc83d4fa683fbff134a"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>Main header file for pictDB core library. </p>
<p>Defines the format of the data structures that will be stored on the disk and provides interface functions.</p>
<p>The picture database starts with exactly one header structure followed by exactly pictdb_header.max_files metadata structures. The actual content is not defined by these structures because it should be stored as raw bytes appended at the end of the database file and addressed by offsets in the metadata structure.</p>
<dl class="section author"><dt>Author</dt><dd>Mia Primorac</dd>
<dd>
Cédric Viaccoz </dd>
<dd>
Matteo Giorla </dd></dl>
<dl class="section date"><dt>Date</dt><dd>14 Mar 2016 </dd></dl>
</div><h2 class="groupheader">Enumeration Type Documentation</h2>
<a class="anchor" id="af68b9ba47e9dab280480cbdc41f7bc1e"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">enum <a class="el" href="pictDB_8h.html#af68b9ba47e9dab280480cbdc41f7bc1e">do_list_mode</a></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Enum to choose the displaying format (stdout or json) </p>

</div>
</div>
<h2 class="groupheader">Function Documentation</h2>
<a class="anchor" id="a162114a649d7d00456af727a37528f5c"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">char* createname </td>
          <td>(</td>
          <td class="paramtype">const char *const&#160;</td>
          <td class="paramname"><em>pict_id</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const int&#160;</td>
          <td class="paramname"><em>resolution_code</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>creates the filename of the image that will be stocked on the disk </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">pict_id</td><td>name of the image </td></tr>
    <tr><td class="paramname">resolution_code</td><td>the resolution of the output image </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>a pointer to the zone in RAM where the name is stored, NULL if an error occured.</dd></dl>
<p>create the filename of the image to be written on the disk according its resolution code. </p>

</div>
</div>
<a class="anchor" id="ace6c2b2940dc6461637dda5b1f009fa0"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void do_close </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structpictdb__file.html">pictdb_file</a> *const&#160;</td>
          <td class="paramname"><em>pict_file</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Closes the file associated with struct <a class="el" href="structpictdb__file.html" title="Struct représentant une base de données d&#39;images. ">pictdb_file</a> (which was previously already opened) </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">pict_file</td><td>In memory structure with header and metadata.</td></tr>
  </table>
  </dd>
</dl>
<p>close the file associated with the struct. And free the memory used by the metadatas. </p>

</div>
</div>
<a class="anchor" id="a2ab91b4b065e1aafe6be65943c6d42c1"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int do_create </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structpictdb__file.html">pictdb_file</a> *&#160;</td>
          <td class="paramname"><em>db_file</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>file_name</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Creates the database called db_filename. Writes the header and the preallocated empty metadata array to database file. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">db_file</td><td>In memory structure with header and metadata. </td></tr>
    <tr><td class="paramname">file_name</td><td>name of the Database to be saved under on the disk. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>error code as defined in <a class="el" href="error_8h.html" title="pictDB library error codes and messages. ">error.h</a> if anything went wrong, 0 otherwise. </dd></dl>

</div>
</div>
<a class="anchor" id="aabfa6e54ae2723bd6e96096688963fdf"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int do_delete </td>
          <td>(</td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>pictID</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structpictdb__file.html">pictdb_file</a> *&#160;</td>
          <td class="paramname"><em>db_file</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Deletes the image from the database given in argument. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">pictID</td><td>the name of the picture wanted to be erased . </td></tr>
    <tr><td class="paramname">db_file</td><td>In memory structure with header and metadata. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>error code as defined in <a class="el" href="error_8h.html" title="pictDB library error codes and messages. ">error.h</a> if anything went wrong, 0 otherwise. </dd></dl>

</div>
</div>
<a class="anchor" id="a4e80f190aa94f7bc7d1e8b3588860114"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int do_gbcollect </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structpictdb__file.html">pictdb_file</a> *&#160;</td>
          <td class="paramname"><em>db_file</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char const *&#160;</td>
          <td class="paramname"><em>orig_file_name</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char *&#160;</td>
          <td class="paramname"><em>tmp_file_name</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Performs garbage collecting on pictDB. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">db_file</td><td>In memory structure with header and metadata. </td></tr>
    <tr><td class="paramname">orig_file_name</td><td>name of the original file </td></tr>
    <tr><td class="paramname">tmp_file_name</td><td>name of the temporary file to perform the garbage collecting</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>error code as defined in <a class="el" href="error_8h.html" title="pictDB library error codes and messages. ">error.h</a> if anything went wrong, 0 otherwise. </dd></dl>

</div>
</div>
<a class="anchor" id="a5fa3a40a86627407cbac79de17674e06"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int do_insert </td>
          <td>(</td>
          <td class="paramtype">const char *const&#160;</td>
          <td class="paramname"><em>image</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">size_t&#160;</td>
          <td class="paramname"><em>image_size</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char *&#160;</td>
          <td class="paramname"><em>pict_id</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structpictdb__file.html">pictdb_file</a> *&#160;</td>
          <td class="paramname"><em>db_file</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Inserts image in image database. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">image</td><td>the image to insert into the database </td></tr>
    <tr><td class="paramname">image_size</td><td>the size of the image to insert </td></tr>
    <tr><td class="paramname">pict_id</td><td>the id of the image to insert </td></tr>
    <tr><td class="paramname">db_file</td><td>the database file into which the image has to be inserted</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>error code as defined in <a class="el" href="error_8h.html" title="pictDB library error codes and messages. ">error.h</a> if anything went wrong, 0 otherwise. </dd></dl>

</div>
</div>
<a class="anchor" id="aca538ce0c2adf847fee28ef959d1d718"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">const char* do_list </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structpictdb__file.html">pictdb_file</a> const *&#160;</td>
          <td class="paramname"><em>pictdb_file</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">enum <a class="el" href="pictDB_8h.html#af68b9ba47e9dab280480cbdc41f7bc1e">do_list_mode</a> <a class="el" href="pictDB_8h.html#af68b9ba47e9dab280480cbdc41f7bc1e">do_list_mode</a>&#160;</td>
          <td class="paramname">&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Displays (on stdout or json) pictDB metadata. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">db_file</td><td>In memory structure with header and metadata. </td></tr>
    <tr><td class="paramname">do_list_mode</td><td>enum to choose between the differents formats in the enum do_list_mode </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>string to print in the case where the format is JSON, else NULL</dd></dl>
<p>Do List. </p>

</div>
</div>
<a class="anchor" id="aa4ec55c072b39b2544d1b95ed6c21305"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int do_open </td>
          <td>(</td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>file_name</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>open_mode</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structpictdb__file.html">pictdb_file</a> *const&#160;</td>
          <td class="paramname"><em>pict_file</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Opens (and only opens) the file indicated by the name, and charges its header and metadatas onto the the struct given. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">file_name</td><td>the name of the file wanted to be open. </td></tr>
    <tr><td class="paramname">open_mode</td><td>the mode with which we want to open the file (i.e. "r+", "wb",...). </td></tr>
    <tr><td class="paramname">pict_file</td><td>the struct where the header and metadata are stocked. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>error code as defined in <a class="el" href="error_8h.html" title="pictDB library error codes and messages. ">error.h</a> if anything went wrong, 0 otherwise.</dd></dl>
<p>open the file according to its mode (i.e "rb", "rw",...) and stocks it into a <a class="el" href="structpictdb__file.html" title="Struct représentant une base de données d&#39;images. ">pictdb_file</a>. </p>

</div>
</div>
<a class="anchor" id="ab9e40c54c4dc1c00e94556983e3502a5"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int do_read </td>
          <td>(</td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>pict_id</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const int&#160;</td>
          <td class="paramname"><em>resolution_code</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char **&#160;</td>
          <td class="paramname"><em>image_buffer</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint32_t *const&#160;</td>
          <td class="paramname"><em>image_size</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structpictdb__file.html">pictdb_file</a> *const&#160;</td>
          <td class="paramname"><em>db_file</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Extracts image from image database and load it. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">pict_id</td><td>name of the picture to find in the db </td></tr>
    <tr><td class="paramname">resolution_code</td><td>tells in what resolution we want to read the image (thumbnail, small or original) </td></tr>
    <tr><td class="paramname">image_buffer</td><td>adress in memory where the image will be stocked </td></tr>
    <tr><td class="paramname">image_size</td><td>adress where the size of the image found will be stocked </td></tr>
    <tr><td class="paramname"><a class="el" href="structpictdb__file.html" title="Struct représentant une base de données d&#39;images. ">pictdb_file</a></td><td>the database to seek the image metadata</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>error code as defined in <a class="el" href="error_8h.html" title="pictDB library error codes and messages. ">error.h</a> if anything went wrong, 0 otherwise. </dd></dl>

</div>
</div>
<a class="anchor" id="a8e8d7b46da60adc83d4fa683fbff134a"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void free_the_buffer </td>
          <td>(</td>
          <td class="paramtype">char **&#160;</td>
          <td class="paramname"><em>image_buffer</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>free the memory of a buffered image. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">image_buffer</td><td>pointer of the pointer where the data is stocked.</td></tr>
  </table>
  </dd>
</dl>
<p>Take care of freeing the memory of the buffer et putting it to NULL </p>

</div>
</div>
<a class="anchor" id="aaa760ed2baba761ad864627e6dfebd72"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void print_header </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structpictdb__header.html">pictdb_header</a> const *&#160;</td>
          <td class="paramname"><em>header</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Prints database header informations. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">header</td><td>The header to be displayed.</td></tr>
  </table>
  </dd>
</dl>
<p>pictDB header display. </p>

</div>
</div>
<a class="anchor" id="ab6990baf805d6b7f0e9209df2552b274"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void print_metadata </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structpict__metadata.html">pict_metadata</a> const *&#160;</td>
          <td class="paramname"><em>metadata</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Prints picture metadata informations. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">metadata</td><td>The metadata of one picture.</td></tr>
  </table>
  </dd>
</dl>
<p>Metadata display. </p>

</div>
</div>
<a class="anchor" id="ad7c4278babe85bd410e27593600c729b"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int read_disk_image </td>
          <td>(</td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>filename</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">size_t *const&#160;</td>
          <td class="paramname"><em>length</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char **&#160;</td>
          <td class="paramname"><em>image_buffer</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Read an image from the disk to store it in the DB. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">filename</td><td>filename of the image on the disk </td></tr>
    <tr><td class="paramname">length</td><td>place where the size of the image on the disk will be stored </td></tr>
    <tr><td class="paramname">image_buffer</td><td>pointer to the place where the buffered image will be stored on the RAM </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>a pointer to the zone in RAM where the image is stored, NULL if an error occured.</dd></dl>
<p>Read the jpeg image located on the disk and transform it into a a chunk of bytes. </p>

</div>
</div>
<a class="anchor" id="abb4bb18ea30069cffdaf8f6c4a74848b"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int resolution_atoi </td>
          <td>(</td>
          <td class="paramtype">const char *const&#160;</td>
          <td class="paramname"><em>resolution</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Transforms a resolution given in form of a character string into the right resolution code. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">resolution</td><td>the given resolution </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>error code as defined in <a class="el" href="error_8h.html" title="pictDB library error codes and messages. ">error.h</a> if anything went wrong, 0 otherwise.</dd></dl>
<p>Transforms a resolution given in form of a character string into the right resolution code. </p>

</div>
</div>
<a class="anchor" id="a563ba753dec49bfc2c10444897d21396"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int write_disk_image </td>
          <td>(</td>
          <td class="paramtype">const char *const&#160;</td>
          <td class="paramname"><em>filename</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char **&#160;</td>
          <td class="paramname"><em>image_buffer</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint32_t&#160;</td>
          <td class="paramname"><em>length</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Store an image from the RAM into the disk. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">filename</td><td>file name of the image on the disk </td></tr>
    <tr><td class="paramname">image_buffer</td><td>place where the image is stored in the RAM </td></tr>
    <tr><td class="paramname">length</td><td>size of the image buffered inthe RAM </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>error code as defined in <a class="el" href="error_8h.html" title="pictDB library error codes and messages. ">error.h</a> if anything went wrong, 0 otherwise.</dd></dl>
<p>Writes the image buffered into a jpeg file on the disk </p>

</div>
</div>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.9.1
</small></address>
</body>
</html>
